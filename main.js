!function(){"use strict";class e{#e;#t;#s;#r;#o;#a;#i;#n;#l;#d;#c;#h;#u;#m;#_;#v;#E;#L;constructor(e,t,s,r,o,a){this.#t=e.link,this.#e=e.name,this.#s=e._id,this.#r=e.owner._id,this.#o=t,this.#l=s,this.#v=r,this.#E=o,this.#L=a,this.#a=e.likes,this.#i=this.#a.length,this.#n=this.#a.some((e=>{e._id,this.#o}))}#k(){this.#d=document.querySelector(this.#l).content.querySelector(".card").cloneNode(!0),this.#c=this.#d.querySelector(".card__image"),this.#h=this.#d.querySelector(".card__button-like"),this.setIsLiked(this.#a),this.toggleActiveLike(),this.#u=this.#d.querySelector(".card__like-amount"),this.updateLikeAmount(this.#a),this.#m=this.#d.querySelector(".card__button-delete"),this.#_=this.#d.querySelector(".card__text"),this.#_.textContent=this.#e,this.#c.setAttribute("src",this.#t),this.#c.setAttribute("alt",this.#e)}#p(){this.#c.addEventListener("click",(()=>{this.#v()})),this.#h.addEventListener("click",(()=>{this.toggleActiveLike(),this.#L()})),this.#m.addEventListener("click",(()=>this.#E(this.#s)))}setIsLiked(e){this.#a=e,this.#n=this.#a.some((e=>e._id===this.#o))}updateLikeAmount(e){this.#i=e.length,this.#u.textContent=this.#i}toggleActiveLike(){this.#n?this.#h.classList.add("card__button-like-active"):this.#h.classList.remove("card__button-like-active")}deleteCard(){this.#d.remove(),this.#d=null}getCardElement(){return this.#k(),this.#p(),this.#d}disableDeleteButton(){this.#m.remove()}getCardData(){return{src:this.#t,alt:this.#e,id:this.#s,ownerId:this.#r,isLiked:this.#n,likes:this.#i}}}class t{#S;#b;#f;#g;#C;#y;#B;#I;#q;constructor(e,t){this.#S=t,this.#b=e.formSelector,this.#f=e.inputSelector,this.#g=e.submitButtonSelector,this.#C=e.inactiveButtonClass,this.#y=e.inputErrorClass,this.#B=e.errorClass,this.#I=[...t.querySelectorAll(e.inputSelector)],this.#q=this.#S.querySelector(this.#g)}#A(e){e.validity.valid?this.#x(e):this.#w(e,e.validationMessage)}#w(e,t){const s=this.#S.querySelector(`.${e.id}-error`);e.classList.add(this.#y),s.textContent=t,s.classList.add(this.#B)}#x(e){const t=this.#S.querySelector(`.${e.id}-error`);e.classList.remove(this.#y),t.classList.remove(this.#B),t.textContent=""}#T(){return this.#I.every((e=>e.validity.valid))}#p(){this.#S.addEventListener("submit",(e=>{e.preventDefault()})),this.#S.addEventListener("reset",(()=>{this.toggleSubmitButton()})),this.#I.forEach((e=>{e.addEventListener("input",(()=>{this.#A(e),this.toggleSubmitButton()}))}))}enableValidation(){this.#p()}toggleSubmitButton(){this.#T()?(this.#q.disabled=!1,this.#q.classList.remove(this.#C)):(this.#q.disabled=!0,this.#q.classList.add(this.#C))}}class s{#U;#D;#F;constructor(e,t){let{items:s,renderer:r}=e;this.#U=s,this.#D=r,this.#F=document.querySelector(t)}renderItems(){this.#U.forEach((e=>{this.#D(e)}))}addItem(e){this.#F.prepend(e)}}class r{_modal;_modalCloseButton;constructor(e){this._modal=document.querySelector(e),this._modalCloseButton=this._modal.querySelector(".modal__button-close"),this.close=this.close.bind(this),this.open=this.open.bind(this)}open(){this._modal.classList.add("modal_opened"),document.addEventListener("keydown",this.#N)}close(){this._modal.classList.remove("modal_opened"),document.removeEventListener("keydown",this.#N)}#N=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._modalCloseButton.addEventListener("click",(()=>{this.close()})),this._modal.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class o extends r{#$;#P;#R;#V;#H;constructor(e,t){super(e),this.#$=t,this.#P=this._modal.querySelector(".modal__form"),this.#R=this.#P.querySelector(".modal__button-save"),this.#V=this.#P.querySelectorAll(".modal__form-input"),this.#H=this.#R.textContent}#O(){const e={};return this.#V.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this.#P.reset()}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this.#R.textContent=e?t:this.#H}setEventListeners(){super.setEventListeners(),this.#P.addEventListener("submit",(e=>{e.preventDefault(),this.#$(this.#O())}))}}const a={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button-save",inactiveButtonClass:"modal__button-disabled",inputErrorClass:"modal__form-input-invalid",errorClass:"modal__input-error_active"},i=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${res.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}updateUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}addNewCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}toggleCardLike(e,t){return t?fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse):fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}updateProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"cec7d967-b84d-4a45-bbb1-45eb7a2c7337","Content-Type":"application/json"}}),n=new class extends r{constructor(e){super(e)}open(e){let{src:t,alt:s}=e;const r=this._modal.querySelector(".modal__image"),o=this._modal.querySelector(".modal__caption");r.src=t,r.alt=s,o.textContent=s,super.open()}}(".modal-picture");n.setEventListeners();const l=new class extends r{#P;#R;#H;constructor(e){super(e),this.#P=this._modal.querySelector(".modal__form"),this.#R=this.#P.querySelector(".modal__button-save"),this.#H=this.#R.textContent}setSubmitHandler(e){this._submitHandler=e}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Deleting...";this.#R.textContent=e?t:this.#H}setEventListeners(){super.setEventListeners(),this.#P.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler()}))}}(".modal-delete");l.setEventListeners();const d=new class{#j;#J;#z;constructor(e){let{userNameSelector:t,userAboutSelector:s,userAvatarSelector:r}=e;this.#j=document.querySelector(t),this.#J=document.querySelector(s),this.#z=document.querySelector(r)}getUserInfo(){return{userName:this.#j.textContent,userAbout:this.#J.textContent}}setUserInfo(e){let{name:t,about:s,avatar:r}=e;this.#j.textContent=t,this.#J.textContent=s,this.#z.src=r,this.#z.alt=t}}({userNameSelector:".profile__title",userAboutSelector:".profile__description",userAvatarSelector:".profile__image"});let c,h;Promise.all([i.getUserInfo(),i.getInitialCards()]).then((e=>{c=e[0]._id;const t=e[0],r=e[1];d.setUserInfo({name:t.name,about:t.about,avatar:t.avatar}),h=new s({items:r,renderer:e=>{h.addItem(b(e))}},".cards__list"),h.renderItems()})).catch((e=>{console.error("Error. The request has failed: ",e)}));const u=new o(".modal-profile",(e=>{u.renderLoading(!0),i.updateUserInfo(e).then((e=>{d.setUserInfo({name:e.name,about:e.about,avatar:e.avatar}),u.close()})).catch((e=>{console.error("Error. The request has failed: ",e)})).finally((()=>{u.renderLoading(!1)}))}));u.setEventListeners();const m=new o(".modal-avatar",(e=>{m.renderLoading(!0),console.log(e.avatar),i.updateProfilePicture(e.avatar).then((e=>{d.setUserInfo({name:e.name,about:e.about,avatar:e.avatar}),m.close()})).catch((e=>{console.error("Error. The request has failed: ",e)})).finally((()=>{m.renderLoading(!1)}))}));m.setEventListeners();const _=new t(a,document.querySelector(".modal__form-avatar"));_.enableValidation(),document.querySelector(".profile__button-edit-avatar").addEventListener("click",(()=>{m.open(),_.toggleSubmitButton()}));const v=document.querySelector(".modal__form-profile"),E=document.querySelector('[name = "name"]'),L=document.querySelector('[name = "about"]'),k=new t(a,v);k.enableValidation(),document.querySelector(".profile__button-edit").addEventListener("click",(()=>{const{userName:e,userAbout:t}=d.getUserInfo();E.value=e,L.value=t,u.open(),k.toggleSubmitButton()}));const p=new o(".modal-add",(e=>{p.renderLoading(!0),i.addNewCard(e).then((e=>{h.addItem(b(e)),p.close()})).catch((e=>{console.error("Error. The request has failed: ",e)})).finally((()=>{p.renderLoading(!1)}))}));p.setEventListeners();const S=new t(a,document.querySelector(".modal__form-add"));function b(t){const s=new e(t,c,"#card",(()=>{n.open(s.getCardData())}),(e=>{l.open(),l.setSubmitHandler((()=>{l.renderLoading(!0),i.deleteCard(e).then((()=>{s.deleteCard(),l.close()})).catch((e=>{console.error("Error. The request has failed: ",e)})).finally((()=>{l.renderLoading(!1)}))}))}),(()=>{i.toggleCardLike(s.getCardData().id,s.getCardData().isLiked).then((e=>{s.setIsLiked(e.likes),s.toggleActiveLike(),s.updateLikeAmount(e.likes)})).catch((e=>{console.error("Error. The request has failed: ",e)}))})),r=s.getCardElement();return t.owner._id!==c&&s.disableDeleteButton(),r}S.enableValidation(),document.querySelector(".profile__button-add").addEventListener("click",(()=>{p.open(),S.toggleSubmitButton()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNLEdBQ2hDLEdBQ0osSUFFSixLQUNFTSxFQUFBQSxlQUNrQnFFLEVBQUtwSSxjQUFjRyxHQUFJaUksRUFBS3BJLGNBQWNLLFNBQ3pEMEUsTUFBTUosSUFFSHlELEVBQUtqSixXQUFXd0YsRUFBSWhHLE9BQ3BCeUosRUFBS2hKLG1CQUNMZ0osRUFBSy9JLGlCQUFpQnNGLEVBQUloRyxNQUM1QixJQUVEeUksT0FBT0MsSUFDTkMsUUFBUUMsTUFBTSxrQ0FBbUNGLEVBQUksR0FDckQsSUFJRmdCLEVBQWNELEVBQUt0SSxpQkFNekIsT0FKSW9ILEVBQVN4SSxNQUFNRCxNQUFRbUksR0FDekJ3QixFQUFLckksc0JBR0FzSSxDQUNULENBdkRBRixFQUFpQnZHLG1CQUNqQjdDLFNBQVNDLGNBQWMsd0JBQXdCUSxpQkFBaUIsU0FBUyxLQUN2RTBJLEVBQVV0RixPQUNWdUYsRUFBaUJ6RyxvQkFBb0IsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgI25hbWU7XHJcbiAgI2ltYWdlO1xyXG4gICNpZDtcclxuICAjb3duZXJJZDtcclxuICAjbXlJZDtcclxuICAjbGlrZXNBcnJheTtcclxuICAjbnVtTGlrZXM7XHJcbiAgI2lzTGlrZWQ7XHJcbiAgI2NhcmRTZWxlY3RvcjtcclxuICAjY2FyZEVsZW1lbnQ7XHJcbiAgI2NhcmRJbWFnZTtcclxuICAjY2FyZExpa2VCdXR0b247XHJcbiAgI2NhcmRMaWtlQW1vdW50O1xyXG4gICNjYXJkRGVsZXRlQnV0dG9uO1xyXG4gICNjYXJkVGV4dDtcclxuICAjaGFuZGxlQ2FyZENsaWNrO1xyXG4gICNoYW5kbGVEZWxldGVDbGljaztcclxuICAjaGFuZGxlTGlrZUNsaWNrO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBteUlkLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQ2xpY2tcclxuICApIHtcclxuICAgIHRoaXMuI2ltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy4jbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuI2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLiNvd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLiNteUlkID0gbXlJZDtcclxuICAgIHRoaXMuI2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuI2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuI2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLiNoYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLiNsaWtlc0FycmF5ID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuI251bUxpa2VzID0gdGhpcy4jbGlrZXNBcnJheS5sZW5ndGg7XHJcbiAgICB0aGlzLiNpc0xpa2VkID0gdGhpcy4jbGlrZXNBcnJheS5zb21lKChlbGVtZW50KSA9PiB7XHJcbiAgICAgIGVsZW1lbnQuX2lkID09PSB0aGlzLiNteUlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gICNtYWtlQ2FyZEVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLiNjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuI2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLiNjYXJkSW1hZ2UgPSB0aGlzLiNjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy4jY2FyZExpa2VCdXR0b24gPVxyXG4gICAgICB0aGlzLiNjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpO1xyXG4gICAgdGhpcy5zZXRJc0xpa2VkKHRoaXMuI2xpa2VzQXJyYXkpO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQWN0aXZlTGlrZSgpO1xyXG4gICAgdGhpcy4jY2FyZExpa2VBbW91bnQgPVxyXG4gICAgICB0aGlzLiNjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYW1vdW50XCIpO1xyXG4gICAgdGhpcy51cGRhdGVMaWtlQW1vdW50KHRoaXMuI2xpa2VzQXJyYXkpO1xyXG4gICAgdGhpcy4jY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuI2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2J1dHRvbi1kZWxldGVcIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLiNjYXJkVGV4dCA9IHRoaXMuI2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKTtcclxuICAgIHRoaXMuI2NhcmRUZXh0LnRleHRDb250ZW50ID0gdGhpcy4jbmFtZTtcclxuXHJcbiAgICB0aGlzLiNjYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuI2ltYWdlKTtcclxuICAgIHRoaXMuI2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy4jbmFtZSk7XHJcbiAgfVxyXG5cclxuICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLiNjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy4jaGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLiNjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLnRvZ2dsZUFjdGl2ZUxpa2UoKSwgdGhpcy4jaGFuZGxlTGlrZUNsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuI2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuI2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuI2lkKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNldElzTGlrZWQobGlrZXNBcnJheSkge1xyXG4gICAgdGhpcy4jbGlrZXNBcnJheSA9IGxpa2VzQXJyYXk7XHJcbiAgICB0aGlzLiNpc0xpa2VkID0gdGhpcy4jbGlrZXNBcnJheS5zb21lKFxyXG4gICAgICAoZWxlbWVudCkgPT4gZWxlbWVudC5faWQgPT09IHRoaXMuI215SWRcclxuICAgICk7XHJcbiAgfVxyXG4gIHVwZGF0ZUxpa2VBbW91bnQobGlrZXNBcnJheSkge1xyXG4gICAgdGhpcy4jbnVtTGlrZXMgPSBsaWtlc0FycmF5Lmxlbmd0aDtcclxuICAgIHRoaXMuI2NhcmRMaWtlQW1vdW50LnRleHRDb250ZW50ID0gdGhpcy4jbnVtTGlrZXM7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVBY3RpdmVMaWtlKCkge1xyXG4gICAgaWYgKHRoaXMuI2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy4jY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlLWFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuI2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19idXR0b24tbGlrZS1hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy4jY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLiNjYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG4gIGdldENhcmRFbGVtZW50KCkge1xyXG4gICAgdGhpcy4jbWFrZUNhcmRFbGVtZW50KCk7XHJcbiAgICB0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuI2NhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZURlbGV0ZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuI2NhcmREZWxldGVCdXR0b24ucmVtb3ZlKCk7XHJcbiAgfVxyXG4gIGdldENhcmREYXRhKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3JjOiB0aGlzLiNpbWFnZSxcclxuICAgICAgYWx0OiB0aGlzLiNuYW1lLFxyXG4gICAgICBpZDogdGhpcy4jaWQsXHJcbiAgICAgIG93bmVySWQ6IHRoaXMuI293bmVySWQsXHJcbiAgICAgIGlzTGlrZWQ6IHRoaXMuI2lzTGlrZWQsXHJcbiAgICAgIGxpa2VzOiB0aGlzLiNudW1MaWtlcyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvbi1zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uLWRpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0LWludmFsaWRcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICNmb3JtRWxlbWVudDtcclxuICAjZm9ybVNlbGVjdG9yO1xyXG4gICNpbnB1dFNlbGVjdG9yO1xyXG4gICNzdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAjaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAjaW5wdXRFcnJvckNsYXNzO1xyXG4gICNlcnJvckNsYXNzO1xyXG4gICNmb3JtSW5wdXRMaXN0O1xyXG4gICNmb3JtQnV0dG9uO1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy4jZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuI2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuI2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy4jc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuI2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy4jaW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy4jZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLiNmb3JtSW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuI2Zvcm1CdXR0b24gPSB0aGlzLiNmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLiNzdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gICN0b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy4jc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy4jaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gICNzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4jaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuI2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgI2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy4jaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gICNjaGVja0Zvcm1WYWxpZGl0eSgpIHtcclxuICAgIHJldHVybiB0aGlzLiNmb3JtSW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEZpZWxkKSA9PiB7XHJcbiAgICAgIHJldHVybiBpbnB1dEZpZWxkLnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLiNmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuI2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudG9nZ2xlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuI2Zvcm1JbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuI3RvZ2dsZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICBpZiAodGhpcy4jY2hlY2tGb3JtVmFsaWRpdHkoKSkge1xyXG4gICAgICB0aGlzLiNmb3JtQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuI2Zvcm1CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLiNpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuI2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLiNmb3JtQnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy4jaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICNpdGVtcztcclxuICAjcmVuZGVyZXI7XHJcbiAgI2NvbnRhaW5lcjtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy4jaXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuI3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLiNjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLiNpdGVtcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuI3JlbmRlcmVyKGVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy4jY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBfbW9kYWw7XHJcbiAgX21vZGFsQ2xvc2VCdXR0b247XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbW9kYWxDbG9zZUJ1dHRvbiA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvbi1jbG9zZVwiKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX21vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuI2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gICNoYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX21vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgI2hhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgI21vZGFsRm9ybTtcclxuICAjbW9kYWxTYXZlQnV0dG9uO1xyXG4gICNtb2RhbElucHV0cztcclxuICAjbW9kYWxTYXZlQnV0dG9uVGV4dDtcclxuXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLiNtb2RhbEZvcm0gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy4jbW9kYWxTYXZlQnV0dG9uID0gdGhpcy4jbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19idXR0b24tc2F2ZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy4jbW9kYWxJbnB1dHMgPSB0aGlzLiNtb2RhbEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcclxuICAgIHRoaXMuI21vZGFsU2F2ZUJ1dHRvblRleHQgPSB0aGlzLiNtb2RhbFNhdmVCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICAjZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dHNPYmplY3QgPSB7fTtcclxuICAgIHRoaXMuI21vZGFsSW5wdXRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRzT2JqZWN0W2VsZW1lbnQubmFtZV0gPSBlbGVtZW50LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0c09iamVjdDtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy4jbW9kYWxGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuI21vZGFsU2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy4jbW9kYWxTYXZlQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy4jbW9kYWxTYXZlQnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLiNtb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy4jaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLiNnZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b24tc2F2ZVwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbi1kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1pbnB1dC1pbnZhbGlkXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IHsgY29uZmlnLCBpbml0aWFsQ2FyZHMgfTtcclxuIiwiLy8gVG9rZW46IGNlYzdkOTY3LWI4NGQtNGE0NS1iYmIxLTQ1ZWI3YTJjNzMzNyBHcm91cCBJRDogZ3JvdXAtMTJcclxuLy8gcmVmYWN0b3IgYWxsIGFwaSBjYWxscyB0byBjaGVjayBmb3IgcmVzcG9uc2Ugb2theW5lc3NcclxuY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcbiAgdG9nZ2xlQ2FyZExpa2UoY2FyZElkLCBpc0xpa2VkKSB7XHJcbiAgICBpZiAoIWlzTGlrZWQpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImNlYzdkOTY3LWI4NGQtNGE0NS1iYmIxLTQ1ZWI3YTJjNzMzN1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbmV4cG9ydCB7IGFwaSB9O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbi8vIGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmNvbnN0IHBpY3R1cmVNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5tb2RhbC1waWN0dXJlXCIpO1xyXG5waWN0dXJlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy8gY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuLy8gICB7XHJcbi8vICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4vLyAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4vLyAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTtcclxuLy8gICAgIH0sXHJcbi8vICAgfSxcclxuLy8gICBcIi5jYXJkc19fbGlzdFwiXHJcbi8vICk7XHJcbi8vIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBkZWxldGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKFwiLm1vZGFsLWRlbGV0ZVwiKTtcclxuZGVsZXRlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIHVzZXJBYm91dFNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIHVzZXJBdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxufSk7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5sZXQgY2FyZFNlY3Rpb247XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcbiAgLnRoZW4oKHZhbHVlcykgPT4ge1xyXG4gICAgdXNlcklkID0gdmFsdWVzWzBdLl9pZDtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0gdmFsdWVzWzBdO1xyXG5cclxuICAgIGNvbnN0IGluaXRpYWxDYXJkcyA9IHZhbHVlc1sxXTtcclxuXHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgIGFib3V0OiB1c2VyRGF0YS5hYm91dCxcclxuICAgICAgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIsXHJcbiAgICB9KTtcclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIFwiLmNhcmRzX19saXN0XCJcclxuICAgICk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gICAgLy8gcmV0dXJuIHVzZXJEYXRhO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvci4gVGhlIHJlcXVlc3QgaGFzIGZhaWxlZDogXCIsIGVycik7XHJcbiAgfSk7XHJcblxyXG5jb25zdCBwcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5tb2RhbC1wcm9maWxlXCIsIChpbnB1dHMpID0+IHtcclxuICBwcm9maWxlTW9kYWwucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVVc2VySW5mbyhpbnB1dHMpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiByZXMubmFtZSxcclxuICAgICAgICBhYm91dDogcmVzLmFib3V0LFxyXG4gICAgICAgIGF2YXRhcjogcmVzLmF2YXRhcixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBwcm9maWxlTW9kYWwuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IuIFRoZSByZXF1ZXN0IGhhcyBmYWlsZWQ6IFwiLCBlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcHJvZmlsZU1vZGFsLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5wcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGF2YXRhck1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIubW9kYWwtYXZhdGFyXCIsIChpbnB1dHMpID0+IHtcclxuICBhdmF0YXJNb2RhbC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGNvbnNvbGUubG9nKGlucHV0cy5hdmF0YXIpO1xyXG5cclxuICBhcGlcclxuICAgIC51cGRhdGVQcm9maWxlUGljdHVyZShpbnB1dHMuYXZhdGFyKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgbmFtZTogcmVzLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IHJlcy5hYm91dCxcclxuICAgICAgICBhdmF0YXI6IHJlcy5hdmF0YXIsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXZhdGFyTW9kYWwuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IuIFRoZSByZXF1ZXN0IGhhcyBmYWlsZWQ6IFwiLCBlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYXZhdGFyTW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufSk7XHJcbmF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IG1vZGFsRm9ybUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm0tYXZhdGFyXCIpO1xyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBtb2RhbEZvcm1BdmF0YXIpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZG9jdW1lbnRcclxuICAucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdC1hdmF0YXJcIilcclxuICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGF2YXRhck1vZGFsLm9wZW4oKTtcclxuICAgIGF2YXRhckZvcm1WYWxpZGF0b3IudG9nZ2xlU3VibWl0QnV0dG9uKCk7XHJcbiAgfSk7XHJcblxyXG5jb25zdCBtb2RhbEZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybS1wcm9maWxlXCIpO1xyXG5jb25zdCBpbnB1dFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWUgPSBcIm5hbWVcIl0nKTtcclxuY29uc3QgaW5wdXREZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWUgPSBcImFib3V0XCJdJyk7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgbW9kYWxGb3JtUHJvZmlsZSk7XHJcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZG9jdW1lbnRcclxuICAucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKVxyXG4gIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgeyB1c2VyTmFtZSwgdXNlckFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgaW5wdXRUaXRsZS52YWx1ZSA9IHVzZXJOYW1lO1xyXG4gICAgaW5wdXREZXNjLnZhbHVlID0gdXNlckFib3V0O1xyXG4gICAgcHJvZmlsZU1vZGFsLm9wZW4oKTtcclxuICAgIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgY2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIubW9kYWwtYWRkXCIsIChpbnB1dHMpID0+IHtcclxuICBjYXJkTW9kYWwucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGROZXdDYXJkKGlucHV0cylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKHJlcykpO1xyXG4gICAgICBjYXJkTW9kYWwuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IuIFRoZSByZXF1ZXN0IGhhcyBmYWlsZWQ6IFwiLCBlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2FyZE1vZGFsLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5jYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IG1vZGFsRm9ybUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm0tYWRkXCIpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBtb2RhbEZvcm1BZGQpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2FyZE1vZGFsLm9wZW4oKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIHVzZXJJZCxcclxuICAgIFwiI2NhcmRcIixcclxuICAgICgpID0+IHtcclxuICAgICAgcGljdHVyZU1vZGFsLm9wZW4oY2FyZC5nZXRDYXJkRGF0YSgpKTtcclxuICAgIH0sXHJcbiAgICAoY2FyZElkKSA9PiB7XHJcbiAgICAgIGRlbGV0ZU1vZGFsLm9wZW4oKTtcclxuICAgICAgZGVsZXRlTW9kYWwuc2V0U3VibWl0SGFuZGxlcigoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlTW9kYWwucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZU1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yLiBUaGUgcmVxdWVzdCBoYXMgZmFpbGVkOiBcIiwgZXJyKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZU1vZGFsLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgICgpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLnRvZ2dsZUNhcmRMaWtlKGNhcmQuZ2V0Q2FyZERhdGEoKS5pZCwgY2FyZC5nZXRDYXJkRGF0YSgpLmlzTGlrZWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjYXJkLnNldElzTGlrZWQocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgY2FyZC50b2dnbGVBY3RpdmVMaWtlKCk7XHJcbiAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZUFtb3VudChyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvci4gVGhlIHJlcXVlc3QgaGFzIGZhaWxlZDogXCIsIGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdldENhcmRFbGVtZW50KCk7XHJcbiAgLy8gcG90ZW50aWFsbHkgY2hhbmdlIHRoaXMgdG8gYmUgYSBtZXRob2QgaW4gdGhlIGNhcmQgY2xhc3NcclxuICBpZiAoY2FyZERhdGEub3duZXIuX2lkICE9PSB1c2VySWQpIHtcclxuICAgIGNhcmQuZGlzYWJsZURlbGV0ZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgb3Blbih7IHNyYywgYWx0IH0pIHtcclxuICAgIGNvbnN0IG1vZGFsSW1hZ2UgPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IG1vZGFsQ2FwdGlvbiA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XHJcbiAgICBtb2RhbEltYWdlLnNyYyA9IHNyYztcclxuICAgIG1vZGFsSW1hZ2UuYWx0ID0gYWx0O1xyXG4gICAgbW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gYWx0O1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICAjbW9kYWxGb3JtO1xyXG4gICNtb2RhbFNhdmVCdXR0b247XHJcbiAgI21vZGFsU2F2ZUJ1dHRvblRleHQ7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLiNtb2RhbEZvcm0gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy4jbW9kYWxTYXZlQnV0dG9uID0gdGhpcy4jbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19idXR0b24tc2F2ZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy4jbW9kYWxTYXZlQnV0dG9uVGV4dCA9IHRoaXMuI21vZGFsU2F2ZUJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcbiAgc2V0U3VibWl0SGFuZGxlcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IGNhbGxiYWNrO1xyXG4gIH1cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIkRlbGV0aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy4jbW9kYWxTYXZlQnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLiNtb2RhbFNhdmVCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLiNtb2RhbFNhdmVCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuI21vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICN1c2VyTmFtZUVsZW1lbnQ7XHJcbiAgI3VzZXJBYm91dEVsZW1lbnQ7XHJcbiAgI3VzZXJBdmF0YXJFbGVtZW50O1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWVTZWxlY3RvciwgdXNlckFib3V0U2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLiN1c2VyTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy4jdXNlckFib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckFib3V0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy4jdXNlckF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlck5hbWU6IHRoaXMuI3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgdXNlckFib3V0OiB0aGlzLiN1c2VyQWJvdXRFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuI3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLiN1c2VyQWJvdXRFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB0aGlzLiN1c2VyQXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XHJcbiAgICB0aGlzLiN1c2VyQXZhdGFyRWxlbWVudC5hbHQgPSBuYW1lO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsIm15SWQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJsaW5rIiwibmFtZSIsIl9pZCIsIm93bmVyIiwibGlrZXMiLCJsZW5ndGgiLCJzb21lIiwiZWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzZXRJc0xpa2VkIiwidG9nZ2xlQWN0aXZlTGlrZSIsInVwZGF0ZUxpa2VBbW91bnQiLCJ0ZXh0Q29udGVudCIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJsaWtlc0FycmF5IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZGVsZXRlQ2FyZCIsImdldENhcmRFbGVtZW50IiwiZGlzYWJsZURlbGV0ZUJ1dHRvbiIsImdldENhcmREYXRhIiwic3JjIiwiYWx0IiwiaWQiLCJvd25lcklkIiwiaXNMaWtlZCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiZXZlcnkiLCJpbnB1dEZpZWxkIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGVTdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImRpc2FibGVkIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiUG9wdXAiLCJfbW9kYWwiLCJfbW9kYWxDbG9zZUJ1dHRvbiIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsImJpbmQiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsImlucHV0c09iamVjdCIsInZhbHVlIiwicmVzZXQiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJjb25maWciLCJhcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJyZXMiLCJzdGF0dXMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJnZXRVc2VySW5mbyIsInVwZGF0ZVVzZXJJbmZvIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJfcmVmMiIsImNhcmRJZCIsInRvZ2dsZUNhcmRMaWtlIiwidXBkYXRlUHJvZmlsZVBpY3R1cmUiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwicGljdHVyZU1vZGFsIiwibW9kYWxJbWFnZSIsIm1vZGFsQ2FwdGlvbiIsImRlbGV0ZU1vZGFsIiwic2V0U3VibWl0SGFuZGxlciIsImNhbGxiYWNrIiwiX3N1Ym1pdEhhbmRsZXIiLCJ1c2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VyQWJvdXRTZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsInVzZXJOYW1lIiwidXNlckFib3V0Iiwic2V0VXNlckluZm8iLCJ1c2VySWQiLCJjYXJkU2VjdGlvbiIsImFsbCIsInZhbHVlcyIsInVzZXJEYXRhIiwiaW5pdGlhbENhcmRzIiwiY2FyZERhdGEiLCJjcmVhdGVDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9maWxlTW9kYWwiLCJpbnB1dHMiLCJmaW5hbGx5IiwiYXZhdGFyTW9kYWwiLCJsb2ciLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwibW9kYWxGb3JtUHJvZmlsZSIsImlucHV0VGl0bGUiLCJpbnB1dERlc2MiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImNhcmRNb2RhbCIsImFkZEZvcm1WYWxpZGF0b3IiLCJjYXJkIiwiY2FyZEVsZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9